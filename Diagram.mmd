graph TD
    %% External Users and Access Layer
    subgraph EXT ["ğŸŒ External Access Layer"]
        USERS["ğŸ‘¥ Internet Users<br/>ğŸ“± Web/Mobile Clients<br/>ğŸ§‘â€ğŸ’» Developers & Admins"]
        DNS["ğŸŒ DNS Resolution<br/>ğŸ“ localhost (dev)<br/>ğŸ”¢ zahara.ai (prod)"]
    end

    %% Development Environment
    subgraph DEV_ENV ["ğŸ’» Development Environment"]
        direction TB
        subgraph INFRA_TOOLS ["ğŸ”§ Infrastructure Tools"]
            MAKEFILE["ğŸ“‹ Makefile<br/>âš™ï¸ Orchestration<br/>ğŸš€ Build & Deploy<br/>ğŸ§ª Testing"]
            DOCKER_COMPOSE["ğŸ³ Docker Compose<br/>ğŸ“¦ Container Orchestration<br/>ğŸ”— Service Networking<br/>ğŸ’¾ Volume Management"]
        end
    end

    %% Docker Container Services
    subgraph SERVICES ["ğŸ³ Containerized Microservices"]
        direction TB

        subgraph WEB_LAYER ["ğŸŒ Web Layer"]
            FRONTEND["ğŸ“± React Frontend<br/>âš›ï¸ Vite + TypeScript<br/>ğŸ¨ Tailwind CSS + Framer<br/>ğŸ“Š TanStack Query<br/>ğŸ”— Port: 3001<br/>ğŸ“ / - Dashboard"]
        end

        subgraph API_LAYER ["ğŸš€ API Layer"]
            API_SERVICE["ğŸ¤– FastAPI Backend<br/>âš¡ Python 3.11<br/>ğŸ” X-API-Key Auth<br/>ğŸ“¡ Observability Middleware<br/>ğŸ”— Port: 8000<br/>ğŸ“ /api/* - REST API"]
            ROUTER_SERVICE["ğŸ§  LLM Router<br/>âš¡ LiteLLM Integration<br/>ğŸ¤– Multi-Provider Support<br/>ğŸ”„ Load Balancing<br/>ğŸ”— Port: 7000<br/>ğŸ“ /v1/chat/completions"]
        end

        subgraph DATA_LAYER ["ğŸ’¾ Data & Storage Layer"]
            POSTGRES["ğŸ˜ PostgreSQL 15<br/>ğŸ“Š Relational Data<br/>ğŸ”„ Alembic Migrations<br/>ğŸ’¾ Traces, Users, API Keys<br/>ğŸ”— Port: 5432"]
            REDIS["ğŸ”´ Redis 7<br/>âš¡ Session Cache<br/>ğŸ—„ï¸ Application Cache<br/>â±ï¸ Rate Limiting<br/>ğŸ”— Port: 6379"]
            QDRANT["ğŸ—‚ï¸ Qdrant Vector DB<br/>ğŸ” Similarity Search<br/>ğŸ“ˆ Real-time Indexing<br/>ğŸ¤– AI Embeddings<br/>ğŸ”— Port: 6333"]
        end

        subgraph OPTIONAL_SERVICES ["ğŸ”§ Optional Services"]
            FLOWISE["ğŸ¨ Flowise Workflow<br/>ğŸ”„ AI Agent Builder<br/>âš™ï¸ No-Code Interface<br/>ğŸ¤– LangChain Integration<br/>ğŸ”— Port: 3000"]
        end
    end

    %% External LLM Providers
    subgraph EXTERNAL_APIS ["ğŸŒ External AI Providers"]
        OPENAI["ğŸ¯ OpenAI API<br/>ğŸ§  GPT-4, GPT-3.5-turbo<br/>ğŸ’° Token-based Pricing<br/>ğŸ” API Key Auth"]
        ANTHROPIC["ğŸ­ Anthropic API<br/>ğŸ§  Claude Models<br/>ğŸ’° Token-based Pricing<br/>ğŸ” API Key Auth"]
        GROQ["âš¡ Groq API<br/>ğŸ§  Fast Inference<br/>ğŸ’° Token-based Pricing<br/>ğŸ” API Key Auth"]
        OPENROUTER["ğŸ”€ OpenRouter API<br/>ğŸŒ Multi-Provider Router<br/>ğŸ’° Unified Pricing<br/>ğŸ” API Key Auth"]
    end

    %% Connection Flows

    %% User Access Flow
    USERS ==>|"ğŸŒ HTTP/HTTPS<br/>ğŸ“± Web Requests"| DNS
    DNS -->|"ğŸ”— Local Development<br/>ğŸ“ localhost:3001"| FRONTEND
    DNS -.->|"ğŸ”— Production<br/>ğŸ“ zahara.ai"| FRONTEND

    %% Frontend to Backend Flow
    FRONTEND -->|"ğŸ” X-API-Key Auth<br/>ğŸ“¡ REST API Calls<br/>ğŸ“Š Real-time Polling"| API_SERVICE
    FRONTEND -.->|"ğŸ”„ Optional Webhook<br/>ğŸ“Š Evaluation Data"| FLOWISE

    %% API Service Data Flow
    API_SERVICE -->|"ğŸ’¾ CRUD Operations<br/>ğŸ”„ Transaction Logs"| POSTGRES
    API_SERVICE -->|"âš¡ Session Cache<br/>ğŸ—„ï¸ Query Results"| REDIS
    API_SERVICE -->|"ğŸ” Vector Search<br/>ğŸ“ˆ Similarity Queries"| QDRANT
    API_SERVICE -.->|"ğŸ¨ Workflow Triggers<br/>ğŸ“Š Evaluation Metrics"| FLOWISE

    %% Router Service Flow
    API_SERVICE -->|"ğŸ¤– LLM Requests<br/>ğŸ”„ Provider Routing"| ROUTER_SERVICE
    ROUTER_SERVICE -->|"ğŸ¯ OpenAI Models"| OPENAI
    ROUTER_SERVICE -->|"ğŸ­ Claude Models"| ANTHROPIC
    ROUTER_SERVICE -->|"âš¡ Groq Models"| GROQ
    ROUTER_SERVICE -->|"ğŸ”€ Multi-Provider"| OPENROUTER

    %% Development Tools Flow
    MAKEFILE -->|"ğŸ“‹ Orchestration<br/>ğŸš€ Service Management"| DOCKER_COMPOSE
    DOCKER_COMPOSE -->|"ğŸ³ Container Management<br/>ğŸ”— Network Setup"| SERVICES
    MAKEFILE -.->|"ğŸ§ª Test Execution<br/>ğŸ” Health Checks"| SERVICES

    %% Database Relationships
    API_SERVICE -.->|"ğŸ“Š Observability Data<br/>ğŸ” Request Tracing"| POSTGRES
    FLOWISE -.->|"ğŸ“ˆ Evaluation Metrics<br/>ğŸ“Š Performance Data"| POSTGRES

    %% Professional Color Scheme for Zahara.ai
    classDef external fill:#0078d4,stroke:#004578,stroke-width:4px,color:#ffffff,font-weight:bold,font-size:14px
    classDef development fill:#00bcf2,stroke:#0078d4,stroke-width:3px,color:#000000,font-weight:bold,font-size:13px
    classDef services fill:#326ce5,stroke:#1e3a8a,stroke-width:3px,color:#ffffff,font-weight:bold,font-size:13px
    classDef webLayer fill:#ff6b35,stroke:#e55100,stroke-width:2px,color:#ffffff,font-weight:600,font-size:12px
    classDef apiLayer fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#ffffff,font-weight:600,font-size:12px
    classDef dataLayer fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#ffffff,font-weight:600,font-size:12px
    classDef optional fill:#78909c,stroke:#455a64,stroke-width:2px,color:#ffffff,font-weight:600,font-size:12px
    classDef externalAPIs fill:#26a69a,stroke:#00695c,stroke-width:3px,color:#ffffff,font-weight:bold,font-size:13px
    classDef infrastructure fill:#ffa726,stroke:#f57c00,stroke-width:2px,color:#000000,font-weight:600,font-size:12px

    %% Apply Class Styling
    class EXT,USERS,DNS external
    class DEV_ENV,INFRA_TOOLS development
    class SERVICES services
    class WEB_LAYER,FRONTEND webLayer
    class API_LAYER,API_SERVICE,ROUTER_SERVICE apiLayer
    class DATA_LAYER,POSTGRES,REDIS,QDRANT dataLayer
    class OPTIONAL_SERVICES,FLOWISE optional
    class EXTERNAL_APIS,OPENAI,ANTHROPIC,GROQ,OPENROUTER externalAPIs
    class MAKEFILE,DOCKER_COMPOSE infrastructure